<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ì¹´ë“œ ğŸ”®</title>
  <!-- Tailwind (ë¡œì»¬ ë¹Œë“œ ì—°ê²°) -->
  <link rel="stylesheet" href="./dist/output.css?v=20251025">
</head>

<body class="min-h-screen w-full h-screen bg-gradient-to-br from-indigo-100 to-purple-200 flex flex-col items-center justify-center text-gray-800 px-4 overflow-hidden">

  <!-- ì¹´ë“œ ì˜ì—­ -->
    <div class="relative w-64 sm:w-72 h-[22rem] sm:h-[26rem] perspective mb-4 flex-shrink-0">
    <div id="tarot-card"
     class="relative w-full h-full preserve-3d cursor-pointer"
     style="will-change: transform">
      <!-- ì¹´ë“œ(ì•ë©´ì— ë’·ë©´ ì´ë¯¸ì§€ í‘œì‹œ) -->
      <div class="absolute inset-0 bg-white rounded-2xl shadow-xl flex items-center justify-center backface-hidden">
        <!-- ë’·ë©´ ì´ë¯¸ì§€ í™•ì¥ìì™€ JS BACK_URLì„ ë°˜ë“œì‹œ ì¼ì¹˜ì‹œí‚¬ ê²ƒ -->
        <img id="tarot-img" src="./img/tarot/tarot-cards-back.png" alt="íƒ€ë¡œì¹´ë“œ" class="rounded-xl shadow-md w-[90%] h-auto">
      </div>
    </div>
  </div>

  <!-- ê²°ê³¼ ë°•ìŠ¤(ì¹´ë“œ ë°”ê¹¥) -->
  <div id="tarot-result" class="w-64 sm:w-72 rounded-2xl bg-white/90 shadow p-4 opacity-0 transition-opacity duration-700 overflow-y-auto max-h-[8rem] sm:max-h-[10rem] flex-shrink-0">
    <h2 id="tarot-name" class="text-lg font-bold text-indigo-700 mb-1"></h2>
    <p id="tarot-meaning" class="text-gray-700 text-sm mb-2"></p>
    <p id="tarot-summary" class="text-indigo-600 text-sm whitespace-pre-line leading-relaxed"></p>
  </div>

    <!-- ë²„íŠ¼ -->
    <button id="tarot-btn" class="mt-3 px-5 py-2.5 bg-indigo-600 text-white rounded-xl shadow hover:bg-indigo-700 active:scale-95 transition">
        ì˜¤ëŠ˜ì˜ ì¹´ë“œ ë½‘ê¸°
    </button>
    <button id="reset-btn" class="mt-2 px-4 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition">
        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
    </button>

  <!-- ì•ˆë‚´ ë¬¸êµ¬ -->
  <p id="tarot-msg" class="mt-3 text-sm text-gray-700 text-center max-w-xs w-full break-words whitespace-pre-wrap"></p>
<script>
    /***************************************************
     * ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ì¹´ë“œ - í•˜ë£¨ 1íšŒ ë½‘ê¸° (ì €ì¥ + ë¦¬ì…‹ + ìì • ë¦¬ì…‹)
     * - ê°™ì€ ê¸°ê¸°/ë¸Œë¼ìš°ì €ì—ì„œëŠ” í•˜ë£¨ í•œ ë²ˆë§Œ ì¹´ë“œ ê³ ì •
     * - 0ì‹œê°€ ë˜ë©´ ìë™ ë¦¬ì…‹
     * - ë‘ ë²ˆì§¸ í´ë¦­ ì‹œ: "ì˜¤ëŠ˜ì€ ì´ë¯¸ ì¹´ë“œë¥¼ ë½‘ì•˜ì–´ìš”. ë‚´ì¼ ë‹¤ì‹œ ë½‘ì•„ì£¼ì„¸ìš” ğŸŒ™"
     ***************************************************/

    /* â‘  íƒ€ë¡œ ì¹´ë“œ ë°ì´í„° (22ì¥) */
    const TAROT = [
        { key: "Tarot_00_Fool", name: "0. The Fool (ê´‘ëŒ€)", meaning: "ìƒˆë¡œìš´ ì‹œì‘, ëª¨í—˜, ììœ ",
            summary: "ê°€ë²¼ìš´ ë§ˆìŒìœ¼ë¡œ í•œ ê±¸ìŒì„ ë‚´ë””ëŒ ë³´ì„¸ìš”. ì˜ˆìƒì¹˜ ëª»í•œ í–‰ìš´ì´ ë”°ë¼ì˜¬ ê±°ì˜ˆìš”. ë‹¤ë§Œ, ì•ˆì „ì€ ê¼­ ì±™ê¸°ê¸°! ğŸ€" },
        { key: "Tarot_01_Magician", name: "I. The Magician (ë§ˆë²•ì‚¬)", meaning: "ì˜ì§€, ì‹¤í–‰ë ¥, ìì› í™œìš©",
            summary: "í•„ìš”í•œ ê±´ ì´ë¯¸ ë‹¹ì‹  ì† ì•ˆì— ìˆì–´ìš”. ìƒê°ë³´ë‹¤ ì‹¤í–‰ì´ ì¤‘ìš”í•´ìš”. ì˜¤ëŠ˜ì€ â€˜ì‹œì‘â€™ì´ ìµœê³ ì˜ ì£¼ë¬¸ì´ì—ìš” âœ¨" },
        { key: "Tarot_02_High_Priestess", name: "II. The High Priestess (ì—¬ì‚¬ì œ)", meaning: "ì§ê°, ë‚´ë©´ì˜ ì§€í˜œ, ë¹„ë°€",
            summary: "ì£¼ë³€ì˜ ì†ŒìŒë³´ë‹¤ ë‚´ë©´ì˜ ëª©ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ì„¸ìš”. ì§€ê¸ˆì€ ì§ê°ì´ ì •ë‹µì´ì—ìš” ğŸŒ™" },
        { key: "Tarot_03_Empress", name: "III. The Empress (ì—¬ì œ)", meaning: "í’ìš”, ì°½ì¡°ì„±, ëŒë´„",
            summary: "ë‹¹ì‹ ì˜ ì•„ì´ë””ì–´ê°€ ë¬´ë¥´ìµê³  ìˆì–´ìš”. ëŒë´„ê³¼ ë°°ë ¤ê°€ ë³µì„ ë¶€ë¦…ë‹ˆë‹¤! ìŠ¤ìŠ¤ë¡œì—ê²Œë„ ë‹¤ì •í•´ì§ˆ ë•Œì˜ˆìš” ğŸ’" },
        { key: "Tarot_04_Emperor", name: "IV. The Emperor (í™©ì œ)", meaning: "ì§ˆì„œ, ë¦¬ë”ì‹­, ì•ˆì •",
            summary: "ëª…í™•í•œ ê¸°ì¤€ì„ ì„¸ìš°ë©´ ì¼ì´ ìˆ ìˆ  í’€ë¦½ë‹ˆë‹¤. ì§€ê¸ˆì€ ë¦¬ë”ì‹­ì„ ë³´ì—¬ì¤„ ë•Œ! í”ë“¤ë¦¬ì§€ ë§ê³  ì¤‘ì‹¬ì„ ì¡ì•„ìš” ğŸ’ª" },
        { key: "Tarot_05_Hierophant", name: "V. The Hierophant (êµí™©)", meaning: "ì „í†µ, ë©˜í† , í•™ìŠµ",
            summary: "ìƒˆë¡œìš´ ê²ƒë³´ë‹¤ ê¸°ë³¸ì— ì¶©ì‹¤í•  ë•Œì˜ˆìš”. ì‹ ë¢°í•  ìˆ˜ ìˆëŠ” ì¡°ì–¸ì„ êµ¬í•˜ê±°ë‚˜ ê¸°ì´ˆë¥¼ ë‹¤ì ¸ë³´ì„¸ìš” ğŸ“˜" },
        { key: "Tarot_06_Lovers", name: "VI. The Lovers (ì—°ì¸)", meaning: "ì„ íƒ, ì¡°í™”, ê´€ê³„",
            summary: "ë‹¹ì‹ ì˜ ê°€ì¹˜ì— ë§ëŠ” ì„ íƒì´ ê²°êµ­ ì˜³ì€ ê¸¸ì´ì—ìš”. ì†”ì§í•œ ëŒ€í™”ê°€ ê´€ê³„ë¥¼ í•œì¸µ ê¹Šê²Œ ë§Œë“¤ì–´ ì¤„ ê±°ì˜ˆìš” â¤ï¸" },
        { key: "Tarot_07_Chariot", name: "VII. The Chariot (ì „ì°¨)", meaning: "ì˜ì§€, ì „ì§„, ìŠ¹ë¦¬",
            summary: "ì£¼ì €í•˜ì§€ ë§ê³  ë°€ê³  ë‚˜ê°€ì„¸ìš”! ì§‘ì¤‘ë ¥ê³¼ ì¶”ì§„ë ¥ì´ ì˜¤ëŠ˜ì˜ í‚¤ì›Œë“œì˜ˆìš”. í•¸ë“¤ì„ ê½‰ ì¡ê³  ì•ìœ¼ë¡œ! ğŸ" },
        { key: "Tarot_08_Strength", name: "VIII. Strength (í˜)", meaning: "ìš©ê¸°, ì¸ë‚´, ìì œ",
          summary: "ë¶€ë“œëŸ¬ì›€ ì†ì— ì§„ì§œ í˜ì´ ìˆ¨ì–´ ìˆì–´ìš”. ì¡°ê¸‰í•¨ ëŒ€ì‹  ì¸ë‚´ë¡œ, ê°•ìš”ë³´ë‹¤ ì„¤ë“ìœ¼ë¡œ ë‹¤ê°€ê°€ ë³´ì„¸ìš” ğŸ¦"},
        { key: "Tarot_09_Hermit", name: "IX. The Hermit (ì€ë‘”ì)", meaning: "ì„±ì°°, íƒêµ¬, ê³ ìš”",
            summary: "í˜¼ìë§Œì˜ ì‹œê°„ì´ í•„ìš”í•´ìš”. ì ì‹œ ë©ˆì¶°ì„œë©´ ê¸¸ì´ ë” ì„ ëª…í•˜ê²Œ ë³´ì¼ ê±°ì˜ˆìš” ğŸ”¦" },
        { key: "Tarot_10_Wheel_of_Fortune", name: "X. Wheel of Fortune (ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´)", meaning: "ë³€í™”, ìˆœí™˜, ì „í™˜ì ",
            summary: "ìš´ì˜ íë¦„ì´ ë°”ë€Œê³  ìˆì–´ìš”. ì¢‹ì€ ê¸°íšŒëŠ” ì¤€ë¹„ëœ ì‚¬ëŒì—ê²Œ ì°¾ì•„ì˜µë‹ˆë‹¤. íƒ€ì´ë°ì„ ë†“ì¹˜ì§€ ë§ˆì„¸ìš” ğŸ¡" },
        { key: "Tarot_11_Justice", name: "XI. Justice (ì •ì˜)", meaning: "ê· í˜•, ê³µì •, ì±…ì„",
            summary: "ê°ì •ë³´ë‹¤ ì‚¬ì‹¤ì— ê·¼ê±°í•´ ê²°ì •í•˜ì„¸ìš”. ê³„ì•½, ì•½ì†, ì„œë¥˜ ê´€ë ¨ ì¼ì—ëŠ” ì‹ ì¤‘í•¨ì´ í•„ìš”í•´ìš” âš–ï¸" },
        { key: "Tarot_12_Hanged_Man", name: "XII. The Hanged Man (ë§¤ë‹¬ë¦° ë‚¨ì)", meaning: "ê´€ì  ì „í™˜, ë‚´ë ¤ë†“ìŒ",
            summary: "ì§€ê¸ˆì˜ ë©ˆì¶¤ì€ ì‹¤íŒ¨ê°€ ì•„ë‹ˆì—ìš”. ì‹œê°ì„ ë°”ê¾¸ë©´ ë‹µì´ ë³´ì¼ ê±°ì˜ˆìš”. í•˜ë‚˜ì¯¤ì€ ë‚´ë ¤ë†“ì•„ë„ ê´œì°®ì•„ìš” ğŸª·" },
        { key: "Tarot_13_Death", name: "XIII. Death (ì£½ìŒ)", meaning: "ì¢…ê²°, ë³€í™”, ìƒˆë¡œìš´ ì‹œì‘",
            summary: "ëì€ ê³§ ìƒˆë¡œìš´ ì‹œì‘ì´ì—ìš”. ê³¼ê°í•œ ì •ë¦¬ê°€ ìƒˆ íŒì„ ì—½ë‹ˆë‹¤. ë¯¸ë ¨ë³´ë‹¤ ë³€í™”ë¥¼ ì„ íƒí•˜ì„¸ìš” ğŸŒ…" },
        { key: "Tarot_14_Temperance", name: "XIV. Temperance (ì ˆì œ)", meaning: "ì¡°í™”, ê· í˜•, ì¹˜ìœ ",
            summary: "ë„ˆë¬´ ë¹ ë¥´ë©´ ë„˜ì¹˜ê³ , ë„ˆë¬´ ëŠ¦ìœ¼ë©´ ì‹ì–´ìš”. ì ë‹¹í•œ ì†ë„ì™€ ì¡°í™”ê°€ ì§€ê¸ˆì˜ í•´ë‹µì´ì—ìš” ğŸµ" },
        { key: "Tarot_15_Devil", name: "XV. The Devil (ì•…ë§ˆ)", meaning: "ì§‘ì°©, ìœ í˜¹, ì†ë°•",
            summary: "ì ê¹ì˜ ìœ í˜¹ì— íœ˜ë‘˜ë¦¬ì§€ ì•Šê²Œ ì¡°ì‹¬í•˜ì„¸ìš”. â€˜í•´ì•¼ í•´ì„œâ€™ê°€ ì•„ë‹Œ â€˜ì›í•´ì„œâ€™ í•˜ëŠ” ì¼ì¸ì§€ ëŒì•„ë³´ì„¸ìš” â›“ï¸" },
        { key: "Tarot_16_Tower", name: "XVI. The Tower (íƒ‘)", meaning: "ê¸‰ë³€, ë¶•ê´´, ì¬êµ¬ì„±",
            summary: "ì˜ˆìƒì¹˜ ëª»í•œ ë³€í™”ê°€ ì°¾ì•„ì˜¬ ìˆ˜ ìˆì–´ìš”. ë¬´ë„ˆì§„ ìë¦¬ì—” ê¼­ í•„ìš”í•œ ê²ƒë§Œ ë‹¤ì‹œ ì„¸ìš°ë©´ ë¼ìš” âš¡" },
        { key: "Tarot_17_Star", name: "XVII. The Star (ë³„)", meaning: "í¬ë§, íšŒë³µ, ì˜ê°",
            summary: "íšŒë³µì˜ ê¸°ìš´ì´ ëŠê»´ì§‘ë‹ˆë‹¤. ì‘ì€ í¬ë§ì„ ê¾¸ì¤€íˆ í‚¤ì›Œë³´ì„¸ìš”. ì˜ê°ì´ ìƒ˜ì†ŸëŠ” ë‚ ì´ì—ìš” âœ¨" },
        { key: "Tarot_18_Moon", name: "XVIII. The Moon (ë‹¬)", meaning: "ë¶ˆí™•ì‹¤, ìƒìƒ, ì ì¬ì˜ì‹",
            summary: "ëª¨í˜¸í•œ ìƒí™©ì¼ìˆ˜ë¡ ì¶”ì¸¡ë³´ë‹¤ í™•ì¸ì´ í•„ìš”í•´ìš”. ë§ˆìŒì˜ ì•ˆê°œê°€ ê±·íˆë©´ ê¸¸ì´ ë³´ì—¬ìš” ğŸŒ«ï¸" },
        { key: "Tarot_19_Sun", name: "XIX. The Sun (íƒœì–‘)", meaning: "ì„±ê³µ, ê¸°ì¨, í™œë ¥",
            summary: "ì´ì œ ë‹¹ì‹ ì´ ë¹›ë‚  ì°¨ë¡€ì˜ˆìš”! ë°ì€ ì—ë„ˆì§€ê°€ ì‚¬ëŒë“¤ì—ê²Œ ì „ë‹¬ë©ë‹ˆë‹¤. í™œì§ ì›ƒì–´ë´ìš” â˜€ï¸" },
        { key: "Tarot_20_Judgement", name: "XX. Judgement (ì‹¬íŒ)", meaning: "ë¶€ë¦„, ê°ì„±, ìš´ëª…ì˜ íë¦„",
          summary: "í•˜ëŠ˜ì˜ ë‚˜íŒ”ì´ ìš¸ë¦¬ê³ , ìš´ëª…ì˜ ë¶€ë¦„ì´ ë‹¤ê°€ì˜µë‹ˆë‹¤. ëª¨ë“  ê²ƒì´ ì œìë¦¬ë¥¼ ì°¾ì•„ê°€ê³  ìˆì–´ìš”. ì´ì œëŠ” íë¦„ì„ ë¯¿ê³  ì‘ë‹µí•  ë•Œì˜ˆìš” ğŸ“£"},
        { key: "Tarot_21_World", name: "XXI. The World (ì„¸ê³„)", meaning: "ì™„ì„±, ì„±ì·¨, í†µí•©",
            summary: "ì§€ê¸ˆê¹Œì§€ ìŒ“ì•„ì˜¨ ë…¸ë ¥ì´ ê²°ì‹¤ì„ ë§ºê³  ìˆì–´ìš”. ê¸°ì¨ì„ ì¦ê¸°ë©°, ë‹¤ìŒ ì—¬ì •ì„ ì¤€ë¹„í•´ ë³´ì„¸ìš” ğŸŒ" },
    ];

    document.addEventListener("DOMContentLoaded", () => {
      /* ìƒìˆ˜ ë° DOM */
      const STORAGE_KEY = "tarot_today";
      const BACK_URL    = "./img/tarot/tarot-cards-back.png";

      const tarotCard    = document.getElementById("tarot-card");
      const tarotImg     = document.getElementById("tarot-img");
      const tarotResult  = document.getElementById("tarot-result");
      const tarotName    = document.getElementById("tarot-name");
      const tarotMeaning = document.getElementById("tarot-meaning");
      const tarotSummary = document.getElementById("tarot-summary");
      const drawBtn      = document.getElementById("tarot-btn");
      const resetBtn     = document.getElementById("reset-btn");
      const msgEl        = document.getElementById("tarot-msg");

      /* ìœ í‹¸ */
      function safeParse(json){ try{ return JSON.parse(json);}catch{ return null; } }
      function getTodayKey(){
        const n = new Date();
        return `${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`;
      }
      function loadImageTo(imgEl, src, fallback){
        return new Promise((resolve)=>{
          const tryLoad = (url, next)=>{
            const t = new Image();
            t.onload  = ()=>{ imgEl.src = url; resolve(true); };
            t.onerror = ()=> next ? next() : resolve(false);
            t.src = url + (url.includes("?")?"&":"?") + "_ts=" + Date.now();
          };
          if (fallback) tryLoad(src, ()=>tryLoad(fallback)); else tryLoad(src);
        });
      }
      function hideResult(){
        tarotResult.classList.add("opacity-0");
        tarotResult.classList.remove("opacity-100");
        tarotName.textContent = "";
        tarotMeaning.textContent = "";
        tarotSummary.textContent = "";
      }
      function scheduleMidnightReset(){
        const now = new Date();
        const next = new Date(now.getFullYear(), now.getMonth(), now.getDate()+1, 0,0,1);
        setTimeout(()=>{
          localStorage.removeItem(STORAGE_KEY);
          location.reload();
        }, next - now);
      }
      scheduleMidnightReset();

        const spinClass = 'spinY-force'; // ë˜ëŠ” 'spinY'
        
        // 1ì´ˆ íšŒì „(360Â°) â€“ ì¤‘ë³µ í´ë¦­ ì¤‘ì²© ë°©ì§€ í¬í•¨
        const SPIN_MS = 1000;
        let spinning = false;


        function spin360Once(el){
            el.getAnimations().forEach(a => a.cancel());
            el.animate(
                [
                { transform: 'translateZ(0) rotateY(0deg)'   },
                { transform: 'translateZ(0) rotateY(360deg)' }
                ],
                { duration: 1000, easing: 'cubic-bezier(0.25,1,0.5,1)', fill: 'forwards' }
            );
        }

      /*********** ì¹´ë“œ ë½‘ê¸° ***********/
      drawBtn.addEventListener("click", async ()=>{
        const todayKey = getTodayKey();
        let saved = safeParse(localStorage.getItem(STORAGE_KEY));

        if (saved && saved.date === todayKey){

            msgEl.textContent = "ì˜¤ëŠ˜ì€ ì´ë¯¸ ì¹´ë“œë¥¼ ë½‘ì•˜ì–´ìš”. ë‚´ì¼ ë‹¤ì‹œ ë½‘ì•„ì£¼ì„¸ìš” ğŸŒ™";
            await loadImageTo(tarotImg, `./img/tarot/${saved.key}.jpg`, `./img/tarot/${saved.key}.jpg`);
            
            // ê°™ì€ ì¹´ë“œ ì¬í‘œì‹œ(íšŒì „ ì—†ìŒ)
            tarotName.textContent = saved.name;
            tarotMeaning.textContent = saved.meaning;
            tarotSummary.textContent = `âœ¨ ì˜¤ëŠ˜ì˜ ìš´ì„¸ âœ¨\n${saved.summary || ""}`;
            tarotResult.classList.remove("opacity-0");
            tarotResult.classList.add("opacity-100");

            spin360Once(tarotCard);   // âœ… ì—¬ê¸° ì¶”ê°€!
            return;
        }

        // ì˜¤ëŠ˜ ì²« ë½‘ê¸°
        const card = TAROT[Math.floor(Math.random() * TAROT.length)];
        saved = { ...card, date: todayKey };
        localStorage.setItem(STORAGE_KEY, JSON.stringify(saved));

        await loadImageTo(tarotImg, `./img/tarot/${saved.key}.jpg`, `./img/tarot/${saved.key}.jpg`);
        // ê²°ê³¼ í‘œì‹œ + 360Â° íšŒì „
        tarotName.textContent = saved.name;
        tarotMeaning.textContent = saved.meaning;
        tarotSummary.textContent = `âœ¨ ì˜¤ëŠ˜ì˜ ìš´ì„¸ âœ¨\n${saved.summary || ""}`;
        tarotResult.classList.remove("opacity-0");
        tarotResult.classList.add("opacity-100");
        msgEl.textContent = "";

        spin360Once(tarotCard);
      });

      /*********** ì²˜ìŒìœ¼ë¡œ (UIë§Œ ë¦¬ì…‹, ì €ì¥ ìœ ì§€) ***********/
      resetBtn.addEventListener("click", async () => {
        tarotCard.classList.remove(spinClass);   // íšŒì „ ì• ë‹ˆ ì œê±°
        await loadImageTo(tarotImg, BACK_URL);   // ë’·ë©´ìœ¼ë¡œ
        hideResult();                            // í…ìŠ¤íŠ¸ ìˆ¨ê¹€
        msgEl.textContent = "";                  // ì•ˆë‚´ë¬¸êµ¬ ì´ˆê¸°í™”
      });
    });
  </script>
</body>
</html>
