<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ì˜¤ëŠ˜ì˜ íƒ€ë¡œ ì¹´ë“œ ğŸ”®</title>
  <!-- CDN í…ŒìŠ¤íŠ¸ -->
  <!-- <script src="https://cdn.tailwindcss.com"></script> -->
  <link rel="stylesheet" href="./dist/output.css" />
  <style>
    /* Tailwindì— ì—†ëŠ” 3D ê´€ë ¨ CSSë§Œ ì‚´ì§ ì¶”ê°€ */
    .perspective { perspective: 1000px; -webkit-perspective: 1000px; }
    .preserve-3d { transform-style: preserve-3d; -webkit-transform-style: preserve-3d; }
    .backface-hidden { backface-visibility: hidden; -webkit-backface-visibility: hidden; }
</style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-100 to-purple-200 flex flex-col items-center justify-center text-gray-800">

  <!-- ì¹´ë“œ ì˜ì—­ -->
<div class="relative w-64 h-96 perspective mb-4">
  <div id="tarot-card" class="relative w-full h-full transition-transform duration-700 preserve-3d cursor-pointer">
    <!-- ì•ë©´ -->
    <div class="absolute inset-0 bg-white rounded-2xl shadow-xl flex items-center justify-center backface-hidden">
      <img id="tarot-img" src="img/tarot/tarot-cards-back.png" alt="íƒ€ë¡œì¹´ë“œ" class="rounded-xl shadow-md w-[90%] h-auto">
    </div>
  </div>
</div>

<!-- ì¹´ë“œ ë°–(ì•„ë˜)ì— ê²°ê³¼ ë°•ìŠ¤ ë°°ì¹˜ -->
<div id="tarot-result"
     class="w-64 rounded-2xl bg-white/90 shadow p-4 opacity-0 transition-opacity duration-700 overflow-y-auto max-h-48">
  <h2 id="tarot-name" class="text-lg font-bold text-indigo-700 mb-1"></h2>
  <p id="tarot-meaning" class="text-gray-700 text-sm mb-2"></p>
  <p id="tarot-summary" class="text-indigo-600 text-sm whitespace-pre-line leading-relaxed"></p>
</div>

  <!-- ë²„íŠ¼ -->
  <button id="tarot-btn" class="px-6 py-3 bg-indigo-600 text-white rounded-xl shadow hover:bg-indigo-700 active:scale-95 transition">
    ì˜¤ëŠ˜ì˜ ì¹´ë“œ ë½‘ê¸°
  </button>
  <!-- ë¦¬ì…‹ ë²„íŠ¼ -->
    <button id="reset-btn" class="mt-3 px-5 py-2 bg-gray-300 text-gray-800 rounded-lg hover:bg-gray-400 transition">
        ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°
    </button>

  <p id="tarot-msg" class="mt-6 text-sm text-gray-700"></p>

  <script>
    const TAROT = [
        { key: "Tarot_00_Fool", name: "0. The Fool (ê´‘ëŒ€)", meaning: "ìƒˆë¡œìš´ ì‹œì‘, ëª¨í—˜, ììœ ",
            summary: "ê°€ë³ê²Œ í•œ ê±¸ìŒì„ ë‚´ë”›ì–´ ë³´ì„¸ìš”. ìš°ì—°í•œ í–‰ìš´ì´ ë”°ë¼ì˜¤ì§€ë§Œ, ê¸°ë³¸ ì•ˆì „ì¥ì¹˜ëŠ” ì±™ê¸°ê¸°! ğŸ€" },
        { key: "Tarot_01_Magician", name: "I. The Magician (ë§ˆë²•ì‚¬)", meaning: "ì˜ì§€, ì‹¤í–‰ë ¥, ìì› í™œìš©",
            summary: "í•„ìš”í•œ ìì›ì€ ì´ë¯¸ ë‹¹ì‹  ì†ì— ìˆì–´ìš”. ë§ë³´ë‹¤ ì‹¤í–‰! ì˜¤ëŠ˜ì€ â€˜ì‹œì‘â€™ì´ ìµœê³ ì˜ ì£¼ë¬¸ âœ¨" },
        { key: "Tarot_02_High_Priestess", name: "II. The High Priestess (ì—¬ì‚¬ì œ)", meaning: "ì§ê°, ë‚´ë©´ì˜ ì§€í˜œ, ë¹„ë°€",
            summary: "ì‹œë„ëŸ¬ìš´ ì¡°ì–¸ë³´ë‹¤ ë‹¹ì‹ ì˜ ì§ê°ì´ ì •í™•í•©ë‹ˆë‹¤. ì ì‹œ ë©ˆì¶”ê³  ë§ˆìŒì˜ ì†Œë¦¬ë¥¼ ë“¤ì–´ë³´ì„¸ìš” ğŸŒ™" },
        { key: "Tarot_03_Empress", name: "III. The Empress (ì—¬ì œ)", meaning: "í’ìš”, ì°½ì¡°ì„±, ëŒë´„",
            summary: "ì•„ì´ë””ì–´ê°€ ë¬´ë¥´ìµëŠ” ë‚ . ëŒë´„ê³¼ ë°°ë ¤ê°€ ë³µì„ ë¶€ë¦…ë‹ˆë‹¤. ìì‹ ì—ê²Œë„ ë¶€ë“œëŸ½ê²Œ ğŸ’" },
        { key: "Tarot_04_Emperor", name: "IV. The Emperor (í™©ì œ)", meaning: "ì§ˆì„œ, ë¦¬ë”ì‹­, ì•ˆì •",
            summary: "ì›ì¹™ê³¼ ê¸°ì¤€ì„ ì„¸ìš°ë©´ ì¼ì´ ì •ëˆë¼ìš”. ë¦¬ë”ì‹­ì„ ë³´ì—¬ì¤„ íƒ€ì´ë°! í”ë“¤ë¦¬ì§€ ë§ê¸° ğŸ’ª" },
        { key: "Tarot_05_Hierophant", name: "V. The Hierophant (êµí™©)", meaning: "ì „í†µ, ë©˜í† , í•™ìŠµ",
            summary: "ê²€ì¦ëœ ë°©ë²•ì´ ë‹µì¼ ë•Œ. ë©˜í† ì—ê²Œ ì¡°ì–¸ì„ êµ¬í•˜ê±°ë‚˜ ê¸°ë³¸ê¸°ë¥¼ ë‹¤ì ¸ë³´ì„¸ìš” ğŸ“˜" },
        { key: "Tarot_06_Lovers", name: "VI. The Lovers (ì—°ì¸)", meaning: "ì„ íƒ, ì¡°í™”, ê´€ê³„",
            summary: "ê°€ì¹˜ì— ë§ëŠ” ì„ íƒì´ ì¥ê¸°ì ìœ¼ë¡œ ë“ì´ ë©ë‹ˆë‹¤. ì†”ì§í•œ ëŒ€í™”ê°€ ê´€ê³„ë¥¼ í•œ ë‹¨ê³„ ì—… â¤ï¸" },
        { key: "Tarot_07_Chariot", name: "VII. The Chariot (ì „ì°¨)", meaning: "ì˜ì§€, ì „ì§„, ìŠ¹ë¦¬",
            summary: "ì£¼ì € ë§ê³  ë°€ì–´ë¶™ì´ê¸°! ì§‘ì¤‘ê³¼ ì¶”ì§„ë ¥ì´ ìŠ¹ë¶€ë¥¼ ê°€ë¦…ë‹ˆë‹¤. í”ë“¤ë ¤ë„ í•¸ë“¤ì„ ê½‰ ì¡ì ğŸ" },
        { key: "Tarot_08_Strength", name: "VIII. Strength (í˜)", meaning: "ìš©ê¸°, ì¸ë‚´, ìì œ",
            summary: "í˜ì€ ë¶€ë“œëŸ¬ì›€ì—ì„œ ë‚˜ì˜µë‹ˆë‹¤. ê°•ìš”ë³´ë‹¤ ì„¤ë“, ì¡°ê¸‰í•¨ë³´ë‹¤ ì¸ë‚´ê°€ ìŠ¹ë¦¬ì˜ ì—´ì‡  ğŸ¦" },
        { key: "Tarot_09_Hermit", name: "IX. The Hermit (ì€ë‘”ì)", meaning: "ì„±ì°°, íƒêµ¬, ê³ ìš”",
            summary: "í˜¼ìë§Œì˜ ì‹œê°„ì´ í•„ìš”í•´ìš”. í•œ ê±¸ìŒ ë¬¼ëŸ¬ì„œë©´ í•´ë‹µì´ ë˜ë ·í•´ì§‘ë‹ˆë‹¤ ğŸ”¦" },
        { key: "Tarot_10_Wheel_of_Fortune", name: "X. Wheel of Fortune (ìš´ëª…ì˜ ìˆ˜ë ˆë°”í€´)", meaning: "ë³€í™”, ìˆœí™˜, ì „í™˜ì ",
            summary: "íë¦„ì´ ë°”ë€ŒëŠ” ë‚ . ì¢‹ì€ íŒŒë„ëŠ” íƒˆ ì¤€ë¹„ê°€ ëœ ìì—ê²Œ ì˜µë‹ˆë‹¤. íƒ€ì´ë° í¬ì°©! ğŸ¡" },
        { key: "Tarot_11_Justice", name: "XI. Justice (ì •ì˜)", meaning: "ê· í˜•, ê³µì •, ì±…ì„",
            summary: "ì‚¬ì‹¤ê³¼ ì›ì¹™ì— ê·¼ê±°í•´ ê²°ì •í•˜ì„¸ìš”. ì„œë¥˜Â·ì•½ì†Â·ê³„ì•½ì— íŠ¹íˆ ì‹ ì¤‘í•˜ê¸° âš–ï¸" },
        { key: "Tarot_12_Hanged_Man", name: "XII. The Hanged Man (ë§¤ë‹¬ë¦° ë‚¨ì)", meaning: "ê´€ì  ì „í™˜, ë‚´ë ¤ë†“ìŒ",
            summary: "ë©ˆì¶¤ì€ ì‹¤íŒ¨ê°€ ì•„ë‹ˆì—ìš”. ì‹œê°ì„ ë°”ê¾¸ë©´ ë‹µì´ ë³´ì—¬ìš”. ì§‘ì°©ì„ í•˜ë‚˜ ë‚´ë ¤ë†“ê¸° ğŸª·" },
        { key: "Tarot_13_Death", name: "XIII. Death (ì£½ìŒ)", meaning: "ì¢…ê²°ê³¼ ì‹œì‘, ë³€í™”",
            summary: "ëë‚´ì•¼ ì‹œì‘ë©ë‹ˆë‹¤. ê³¼ê°í•œ ì •ë¦¬ê°€ ìƒˆ íŒì„ ì—½ë‹ˆë‹¤. ë¯¸ë ¨ë³´ë‹¤ ê°±ì‹ ì„ íƒí•˜ê¸° ğŸŒ‘â¡ï¸ğŸŒ…" },
        { key: "Tarot_14_Temperance", name: "XIV. Temperance (ì ˆì œ)", meaning: "ì¡°í™”, ê· í˜•, ì¹˜ìœ ",
            summary: "ë„ˆë¬´ ë¹ ë¥´ë©´ ë„˜ì¹˜ê³ , ë„ˆë¬´ ëŠ¦ìœ¼ë©´ ì‹ì–´ìš”. ì ë‹¹í•œ ì†ë„ì™€ ì¡°í•©ì„ ì°¾ê¸° ğŸµ" },
        { key: "Tarot_15_Devil", name: "XV. The Devil (ì•…ë§ˆ)", meaning: "ì§‘ì°©, ìœ í˜¹, ì†ë°•",
            summary: "ë‹¨ê¸° ì¾Œë½ì˜ í•¨ì • ì£¼ì˜. â€˜í•´ì•¼ í•´ì„œâ€™ê°€ ì•„ë‹ˆë¼ â€˜ì›í•´ì„œâ€™ í•˜ëŠ”ì§€ ì ê²€í•´ìš” â›“ï¸" },
        { key: "Tarot_16_Tower", name: "XVI. The Tower (íƒ‘)", meaning: "ê¸‰ë³€, ë¶•ê´´, ì¬êµ¬ì„±",
            summary: "ì˜ˆìƒ ë°– ë³€ìˆ˜ê°€ êµ¬ì¡°ë¥¼ í”ë“­ë‹ˆë‹¤. ë¬´ë„ˆì§„ ìë¦¬ì—ì„œ ê¼­ í•„ìš”í•œ ê²ƒë§Œ ë‹¤ì‹œ ìŒ“ê¸° âš¡" },
        { key: "Tarot_17_Star", name: "XVII. The Star (ë³„)", meaning: "í¬ë§, íšŒë³µ, ì˜ê°",
            summary: "íšŒë³µì˜ ë°”ëŒì´ ë¶‘ë‹ˆë‹¤. ì‘ì€ í¬ë§ì„ ê¾¸ì¤€íˆ í‚¤ì›Œë³´ì„¸ìš”. ì˜ê°ì´ ìƒ˜ì†ŸëŠ” ë‚  âœ¨" },
        { key: "Tarot_18_Moon", name: "XVIII. The Moon (ë‹¬)", meaning: "ë¶ˆí™•ì‹¤, ìƒìƒ, ì ì¬ì˜ì‹",
            summary: "ë¶ˆì•ˆì€ ì •ë³´ì˜ ë¶€ì¬ì—ì„œ ì™€ìš”. í™•ì¸ë˜ì§€ ì•Šì€ ì¶”ì¸¡ë³´ë‹¤ íŒ©íŠ¸ ì²´í¬ ë¨¼ì € ğŸŒ«ï¸" },
        { key: "Tarot_19_Sun", name: "XIX. The Sun (íƒœì–‘)", meaning: "ì„±ê³µ, ê¸°ì¨, í™œë ¥",
            summary: "ë‹¹ë‹¹íˆ ë¹›ë‚  ì°¨ë¡€! í˜‘ì—…ë„ ìˆ ìˆ  í’€ë¦½ë‹ˆë‹¤. ë°ì€ íƒœë„ë¡œ ë°€ê³  ë‚˜ê°€ê¸° â˜€ï¸" },
        { key: "Tarot_20_Judgement", name: "XX. Judgement (ì‹¬íŒ)", meaning: "ê°ì„±, ë¶€ë¦„, í‰ê°€",
            summary: "ê³¼ê±° ê²½í—˜ì´ ì¬í‰ê°€ë©ë‹ˆë‹¤. í˜¸ì¶œë°›ì€ ìë¦¬ì—ì„œ ë‹¹ì‹ ì˜ ëª©ì†Œë¦¬ë¥¼ ë‚´ì„¸ìš” ğŸ“£" },
        { key: "Tarot_21_World", name: "XXI. The World (ì„¸ê³„)", meaning: "ì™„ì„±, ì„±ì·¨, í†µí•©",
            summary: "í•œ ì‚¬ì´í´ì´ ì™„ì„±ëìŠµë‹ˆë‹¤. ë§ˆë¬´ë¦¬ë¥¼ ì¶•í•˜í•˜ê³ , ë‹¤ìŒ ë ˆë²¨ì„ ì„¤ê³„í•  ë•Œ ğŸŒ" }
    ];

    document.addEventListener("DOMContentLoaded", () => {
        const $card    = document.getElementById("tarot-card");
        const $img     = document.getElementById("tarot-img");
        const $result  = document.getElementById("tarot-result");
        const $name    = document.getElementById("tarot-name");
        const $meaning = document.getElementById("tarot-meaning");
        const $summary = document.getElementById("tarot-summary"); // ì—†ìœ¼ë©´ nullì´ì–´ë„ ë™ì‘
        const $btn     = document.getElementById("tarot-btn");
        const $msg     = document.getElementById("tarot-msg");

        // ëª¨ë“œ ì „í™˜: true = í•˜ë£¨ 1íšŒ, false = í…ŒìŠ¤íŠ¸ ë¬´ì œí•œ
        const DAILY_MODE = true;

        const today = new Date().toDateString();
        const savedRaw = localStorage.getItem("tarot");
        const saved = savedRaw ? JSON.parse(savedRaw) : null;

        let angle = 0;

        // í˜ì´ì§€ ì§„ì… ì‹œ: í•˜ë£¨ 1íšŒ ëª¨ë“œë©´ ì´ë¯¸ ë½‘ì•˜ëŠ”ì§€ í™•ì¸
        if (DAILY_MODE && saved && saved.date === today) {
            showCard(saved, /*spin*/ false);
            if ($msg) $msg.textContent = "ì˜¤ëŠ˜ì€ ì´ë¯¸ ì¹´ë“œë¥¼ ë½‘ì•˜ì–´ìš” ğŸŒ™";
            disableButton();
        }

        $btn.addEventListener("click", async () => {
            if (DAILY_MODE) {
            const s = localStorage.getItem("tarot");
            const j = s ? JSON.parse(s) : null;
            if (j && j.date === today) {
                alert("ì˜¤ëŠ˜ì€ ì´ë¯¸ ì¹´ë“œë¥¼ ë½‘ì•˜ì–´ìš” ğŸŒ™");
                return;
            }
            }

            // ëœë¤ ì¹´ë“œ ë½‘ê¸°
            const card = TAROT[Math.floor(Math.random() * TAROT.length)];

            // ì´ë¯¸ì§€ê°€ ì‹¤ì œë¡œ ë¡œë“œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ UI ì—…ë°ì´íŠ¸
            await loadImage($img, `img/tarot/${card.key}.jpg`, {
                // jpgê°€ ì—†ìœ¼ë©´ pngë¡œ í´ë°±
                fallback: `img/tarot/${card.key}.png`,
                // ë‘˜ ë‹¤ ì‹¤íŒ¨í•˜ë©´ ë’·ë©´ ìœ ì§€
            });

            showCard(card, /*spin*/ true);

            if (DAILY_MODE) {
            localStorage.setItem("tarot", JSON.stringify({
                key: card.key,
                name: card.name,
                meaning: card.meaning,
                summary: card.summary || "",
                date: today
            }));
            disableButton();
            }
        });

        function showCard(card, spin = true) {
            // í…ìŠ¤íŠ¸ ì±„ìš°ê¸°
            $name.textContent = card.name;
            $meaning.textContent = card.meaning;
            if ($summary) {
            $summary.textContent = `âœ¨ ì˜¤ëŠ˜ì˜ ìš´ì„¸ ì´ì •ë¦¬ âœ¨\n${card.summary || ""}`;
            }

            // ê²°ê³¼ ë°•ìŠ¤ ë³´ì´ê¸° (Tailwind ìˆ¨ê¹€ í•´ì œ)
            $result.classList.remove("opacity-0");
            $result.classList.add("opacity-100");

            // ì¹´ë“œ 360ë„ íšŒì „(ì´ë¯¸ì§€ ê±°ê¾¸ë¡œ ë°©ì§€)
            if (spin) {
            angle += 360;
            $card.style.transition = "transform 1s cubic-bezier(0.25,1,0.5,1)";
            $card.style.transform = `rotateY(${angle}deg)`;
            }
        }

        function disableButton() {
            $btn.disabled = true;
            $btn.classList.add("bg-gray-400", "cursor-not-allowed");
            $btn.classList.remove("bg-indigo-600", "hover:bg-indigo-700");
        }

        // ë‹¤ì‹œ ë½‘ê¸° ë²„íŠ¼ ê¸°ëŠ¥
        const $reset = document.getElementById("reset-btn");
        if ($reset) {
        $reset.addEventListener("click", () => {
            localStorage.removeItem("tarot");
            alert("âœ¨ ì²˜ìŒ ìƒíƒœë¡œ ëŒì•„ê°‘ë‹ˆë‹¤! ğŸŒ™\nì´ì œ ì˜¤ëŠ˜ì˜ ì¹´ë“œë¥¼ ìƒˆë¡œ ë½‘ì„ ìˆ˜ ìˆì–´ìš”.");
            location.reload(); // ìƒˆë¡œê³ ì¹¨ìœ¼ë¡œ ë²„íŠ¼ ë‹¤ì‹œ í™œì„±í™”
        });
        }

        // ì´ë¯¸ì§€ ë¡œë” (jpg ì‹¤íŒ¨ ì‹œ png í´ë°±)
        function loadImage(imgEl, src, { fallback } = {}) {
            return new Promise((resolve) => {
            const tryLoad = (url, next) => {
                const test = new Image();
                test.onload = () => { imgEl.src = url; resolve(true); };
                test.onerror = () => {
                if (next) next();
                else resolve(false);
                };
                test.src = url + (url.includes("?") ? "&" : "?") + "_ts=" + Date.now(); // ìºì‹œë¬´íš¨í™”
            };

            if (fallback) {
                tryLoad(src, () => tryLoad(fallback));
            } else {
                tryLoad(src);
            }
            });
        }
        });


  </script>
</body>
</html>
